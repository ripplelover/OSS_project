<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Project Schedule</title>
        <meta http-equiv="content-type" content="text-html; charset=utf-8" />

        <script type="text/javascript" src="https://code.jscharting.com/latest/jscharting.js"></script>

        <script type="text/javascript" src="https://code.jscharting.com/latest/modules/toolbar.js"></script>

    </head>
    <body>
        <div id="chartDiv" style="max-width: 1200px; min-width:400px; height: 640px; margin: 0px auto;"></div>

        <script type="text/javascript">

        var currentDate = '11/30/2023';
        // var present = '12/8/2023';
        var thresholdDate = norm(currentDate);

        var chart = JSC.chart('chartDiv', {
            debug: true,
            title_label_text: 'Project Schedule from %min to %max',
            type: 'horizontal column solid',
            zAxis_scale_type: 'stacked',
            palette: ['#94c23d', '#9adcfa', '#99e4ed', '#d0b6fa', '#f59120', '#e1a2c9'],
            legend: {
            position: 'inside right top',
            template: '%icon %name'
            },
            yAxis: {
            scale_type: 'time',
            scale_range_padding: 0.05,
            markers: [
                { 
                    value: currentDate, 
                    color: 'red', 
                    label_text: 'Now' 
                },
                /*
                { 
                    value: present, 
                    color: 'blue', 
                    label_text: 'Presentation' 
                }
                */
            ]
            },
            defaultPoint: {
            outline_width: 0,
            radius: 0,
            label: { 
                text: pointLabelText, 
                placement: 'outside' 
            },
            tooltip: '<b>%name</b> %low - %high<br/>{days(%high-%low)} days'
            },
            yAxis_scale_type: 'time',
            defaultSeries: {
            firstPoint: {
                outline: { 
                    color: 'darkenMore', 
                    width: 2 
                },
                xAxisTick_label_text: '<b>%value</b>'
            }
            },
            series: [
            {
                name: 'Initiate',
                points: [
                {
                    name: 'Initiate',
                    y: ['11/2/2023', '11/4/2023']
                },
                {
                    name: '프로젝트 아이디어 구상',
                    y: ['11/2/2023', '11/3/2023']
                },
                {
                    name: '자료조사',
                    y: ['11/3/2023', '11/4/2023']
                }
                ]
            },
            {
                name: 'Study',
                points: [
                {
                    name: 'Study',
                    y: ['11/4/2023', '11/11/2023']
                },
                {
                    name: 'Html',
                    y: ['11/4/2023', '11/6/2023']
                },
                {
                    name: 'CSS',
                    y: ['11/6/2023', '11/8/2023']
                },
                {
                    name: 'Java script',
                    y: ['11/8/2023', '11/10/2023']
                },
                {
                    name: 'Firebase',
                    y: ['11/10/2023', '11/11/2023']
                }
                ]
            },
            {
                name: '김동규',
                points: [
                {
                    name: '김동규',
                    y: ['11/11/2023', '11/17/2023']
                },
                {
                    name: '회원가입 기능',
                    y: ['11/12/2023', '11/14/2023']
                },
                {
                    name: '로그인 기능',
                    y: ['11/14/2023', '11/16/2023']
                },
                {
                    name: 'Readme.md Structure',
                    y: ['11/16/2023', '11/17/2023']
                }
                ]
            },
            {
                name: '김민지',
                points: [
                {
                    name: '김민지',
                    y: ['11/17/2023', '11/22/2023']
                },
                {
                    name: '이메일 인증 기능',
                    y: ['11/17/2023', '11/19/2023']
                },
                {
                    name: '비밀번호 찾기 기능',
                    y: ['11/19/2023', '11/21/2023']
                },
                {
                    name: '사이트 로더 기능',
                    y: ['11/20/2023', '11/21/2023']
                },
                {
                    name: 'Progress.md Structure',
                    y: ['11/21/2023', '11/22/2023']
                }
                ]
            },
            {
                name: '배정우',
                points: [
                {
                    name: '배정우',
                    y: ['11/22/2023', '12/3/2023']
                },
                { 
                    name: '게시글 올리는 기능', 
                    y: ['11/22/2023', '11/23/2023'] 
                },
                {
                    name: '회원 별 프로필 기능',
                    y: ['11/23/2023', '12/3/2023']
                },
                {
                    name: '프로젝트 스케줄',
                    y: ['11/28/2023', '11/29/2023']
                }
                ]
            },
            {
                name: 'Add & Modify',
                points: [
                {
                    name: 'Add & Modify',
                    y: ['12/3/2023', '12/8/2023']
                }
                ]
            }
            ]
        });

        function pointLabelText(point) {
            var pY = point.options('y');
            var pRange = pY.map(norm);
            if (thresholdDate > pRange[1]) {
            return getIconText('material/navigation/check', '#66BB6A', 20);
            } else if (thresholdDate > pRange[0]) {
            return getIconText('material/notification/sync', '#FDD835', 20);
            }
            return getIconText('material/navigation/close', '#FF5252', 20);
        }

        function norm(d) {
            return new Date(d).getTime();
        }

        function getIconText(name, color, size) {
            return '<icon name=' + name + ' size=' + size + ' fill=' + color + '>';
        }
        </script>
    </body>
</html>
